<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Sapi - Farm App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body class="bg-gray-100">

    <div class="max-w-2xl mx-auto pb-24"> <!-- Padding bawah untuk memberi ruang bagi tombol sticky -->
        <div class="p-4">
            <header class="flex items-center mb-4">
                <a href="cattle-list.html" class="text-green-600 p-2 rounded-full hover:bg-gray-200 mr-3">
                    <ion-icon name="arrow-back-outline" class="text-2xl align-middle"></ion-icon>
                </a>
                <h1 class="text-2xl font-bold text-gray-800">Detail Sapi</h1>
            </header>

            <!-- Galeri Foto -->
            <div class="bg-white p-4 rounded-xl shadow-sm mb-4">
                <img id="main-photo" src="assets/images/sapi2.jpeg" alt="Foto Sapi"
                    class="w-full h-auto object-cover rounded-lg mb-3">
                <div class="grid grid-cols-4 gap-2">
                    <img src="assets/images/sapi2.jpeg" onclick="changePhoto(this.src)"
                        class="cursor-pointer rounded-md border-2 border-green-500">
                    <img src="assets/images/sapi3.jpeg" onclick="changePhoto(this.src)"
                        class="cursor-pointer rounded-md border-2 border-transparent hover:border-green-500">
                    <img src="assets/images/sapi4.jpeg" onclick="changePhoto(this.src)"
                        class="cursor-pointer rounded-md border-2 border-transparent hover:border-green-500">
                    <img src="assets/images/sapi1.jpeg" onclick="changePhoto(this.src)"
                        class="cursor-pointer rounded-md border-2 border-transparent hover:border-green-500">
                </div>
            </div>

            <!-- Detail Info Sapi -->
            <div class="bg-white p-5 rounded-xl shadow-sm mb-4">
                <h2 class="text-2xl font-bold text-gray-900">Sapi Limosin S001</h2>
                <p class="text-3xl font-bold text-green-600 mt-1 mb-4">Rp 55.000.000</p>
                <div class="space-y-3 text-gray-600 text-sm">
                    <div class="flex justify-between"><span
                            class="font-medium text-gray-500">Jenis:</span><span>Limosin</span></div>
                    <div class="flex justify-between"><span class="font-medium text-gray-500">No
                            Sapi:</span><span>S001</span></div>
                    <div class="flex justify-between"><span
                            class="font-medium text-gray-500">Kandang:</span><span>Kandang A</span></div>
                </div>
                <hr class="my-4">
                <h4 class="font-semibold mb-2 text-gray-800">Riwayat Bobot</h4>
                <ul class="list-disc list-inside text-gray-600 space-y-1 text-sm">
                    <li>850 kg <span class="text-xs text-gray-400">(30 Juli 2025)</span></li>
                    <li>845 kg <span class="text-xs text-gray-400">(15 Juli 2025)</span></li>
                </ul>
            </div>

            <!-- Kartu Informasi Penjual -->
            <div class="bg-white p-5 rounded-xl shadow-sm mb-4">
                <h4 class="font-semibold mb-3 text-gray-800">Informasi Penjual</h4>
                <div class="space-y-3 text-gray-600 text-sm">
                    <div class="flex justify-between items-center">
                        <span class="font-medium text-gray-500">Nama:</span>
                        <span class="font-semibold">Bapak Subagyo</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="font-medium text-gray-500">No. Telepon:</span>
                        <a href="tel:081234567890"
                            class="font-semibold text-green-600 hover:underline">0812-3456-7890</a>
                    </div>
                    <div class="flex justify-between items-start">
                        <span class="font-medium text-gray-500">Alamat:</span>
                        <span class="text-right">Jl. Peternakan Jaya No. 12, Kab. Boyolali</span>
                    </div>
                </div>
                <!-- Tombol Update Dihapus -->
            </div>

            <!-- Video Dokumentasi -->
            <div class="bg-white p-5 rounded-xl shadow-sm">
                <h4 class="font-semibold mb-3 text-gray-800">Video Dokumentasi</h4>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div id="play-video-1">
                        <div
                            class="relative aspect-video w-full bg-slate-200 rounded-lg overflow-hidden group cursor-pointer">
                            <img src="assets/images/sapi1.jpeg" class="w-full h-full object-cover"
                                alt="Thumbnail Video Timbang">
                            <div
                                class="absolute inset-0 bg-black bg-opacity-20 group-hover:bg-opacity-40 transition-all flex items-center justify-center">
                                <ion-icon name="play-circle"
                                    class="text-white text-6xl opacity-80 drop-shadow-lg"></ion-icon>
                            </div>
                        </div>
                        <p class="text-sm text-gray-700 font-medium mt-2">Video Saat Ditimbang</p>
                    </div>
                    <div id="play-video-2">
                        <div
                            class="relative aspect-video w-full bg-slate-200 rounded-lg overflow-hidden group cursor-pointer">
                            <img src="assets/images/sapi2.jpeg" class="w-full h-full object-cover"
                                alt="Thumbnail Video Bodi">
                            <div
                                class="absolute inset-0 bg-black bg-opacity-20 group-hover:bg-opacity-40 transition-all flex items-center justify-center">
                                <ion-icon name="play-circle"
                                    class="text-white text-6xl opacity-80 drop-shadow-lg"></ion-icon>
                            </div>
                        </div>
                        <p class="text-sm text-gray-700 font-medium mt-2">Video Bodi Sapi</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tombol Aksi Sticky di Bawah -->
    <footer class="fixed bottom-0 left-0 right-0 bg-white p-4 border-t border-gray-200 shadow-lg z-20">
        <div class="max-w-2xl mx-auto"><button id="sale-btn"
                class="w-full bg-green-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-700 transition duration-300 hidden">Lakukan
                Transaksi</button>
            <div id="guest-message" class="text-center text-sm text-gray-600 p-2 bg-yellow-100 rounded-lg hidden">Login
                sebagai <strong>Penjual</strong> untuk melakukan transaksi.</div>
        </div>
    </footer>

    <!-- Modal Form Transaksi -->
    <div id="sale-modal-overlay"
        class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-lg m-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Form Penjualan</h2><button id="close-sale-modal"
                    class="text-gray-500 hover:text-gray-800"><ion-icon name="close-outline"
                        class="text-3xl"></ion-icon></button>
            </div>
            <form class="space-y-4">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div><label class="block text-sm font-medium text-gray-700">Nama Pembeli</label><input type="text"
                            class="mt-1 w-full p-2 border border-gray-300 rounded-lg"></div>
                    <div><label class="block text-sm font-medium text-gray-700">Alamat Pembeli</label><input type="text"
                            class="mt-1 w-full p-2 border border-gray-300 rounded-lg"></div>
                    <div><label class="block text-sm font-medium text-gray-700">DP (Rp)</label><input type="number"
                            class="mt-1 w-full p-2 border border-gray-300 rounded-lg"></div>
                    <div><label class="block text-sm font-medium text-gray-700">Metode Bayar</label><select
                            class="mt-1 w-full p-2 border border-gray-300 rounded-lg">
                            <option>Cash</option>
                            <option>Transfer</option>
                        </select></div>
                    <div class="sm:col-span-2"><label class="block text-sm font-medium text-gray-700">Alamat
                            Kirim</label><textarea rows="2"
                            class="mt-1 w-full p-2 border border-gray-300 rounded-lg"></textarea></div>
                    <div><label class="block text-sm font-medium text-gray-700">Tgl Kirim</label><input type="date"
                            class="mt-1 w-full p-2 border border-gray-300 rounded-lg"></div>
                    <div><label class="block text-sm font-medium text-gray-700">Jam Kirim</label><input type="time"
                            class="mt-1 w-full p-2 border border-gray-300 rounded-lg"></div>
                    <div class="sm:col-span-2"><label
                            class="block text-sm font-medium text-gray-700">Penjual</label><input type="text"
                            value="Nama Penjual (Otomatis)" readonly
                            class="mt-1 w-full p-2 border border-gray-300 rounded-lg bg-gray-100"></div>
                </div>
                <div class="mt-6 flex justify-end gap-3"><button type="button" id="cancel-sale-btn"
                        class="bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg hover:bg-gray-300">Batal</button><button
                        type="submit"
                        class="bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal untuk Video Player -->
    <div id="video-modal-overlay"
        class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden flex items-center justify-center p-4">
        <button id="close-video-modal" class="absolute top-4 right-4 text-white hover:text-gray-300 z-10"><ion-icon
                name="close-circle" class="text-4xl"></ion-icon></button>
        <div class="w-full max-w-4xl">
            <div class="aspect-video"><video id="video-player" class="w-full h-full" controls autoplay
                    playsinline>Browser Anda tidak mendukung tag video.</video></div>
        </div>
    </div>

    <script>
        function changePhoto(src) { document.getElementById('main-photo').src = src.replace('150x150', '800x600'); }

        document.addEventListener('DOMContentLoaded', function () {
            const userRole = localStorage.getItem('userRole');
            if (!userRole) { window.location.href = window.location.origin + '/index.html'; return; }

            // Logika tampilan tombol berdasarkan peran pengguna (disederhanakan)
            const saleBtn = document.getElementById('sale-btn');
            const guestMessage = document.getElementById('guest-message');

            if (userRole === 'seller') {
                saleBtn.classList.remove('hidden');
            } else { // 'guest' atau 'admin'
                guestMessage.classList.remove('hidden');
            }

            // Logika untuk Modal Transaksi
            const modalOverlay = document.getElementById('sale-modal-overlay');
            const openModalBtn = document.getElementById('sale-btn');
            const closeModalBtn = document.getElementById('close-sale-modal');
            const cancelModalBtn = document.getElementById('cancel-sale-btn');
            function openModal() { modalOverlay.classList.remove('hidden'); }
            function closeModal() { modalOverlay.classList.add('hidden'); }
            openModalBtn.addEventListener('click', openModal);
            closeModalBtn.addEventListener('click', closeModal);
            cancelModalBtn.addEventListener('click', closeModal);
            modalOverlay.addEventListener('click', function (e) { if (e.target === modalOverlay) { closeModal(); } });

            // Logika untuk Video Player
            const videoModalOverlay = document.getElementById('video-modal-overlay');
            const closeVideoModalBtn = document.getElementById('close-video-modal');
            const videoPlayer = document.getElementById('video-player');
            const playVideo1Btn = document.getElementById('play-video-1');
            const playVideo2Btn = document.getElementById('play-video-2');
            const videoUrl1 = 'https://www.w3schools.com/html/mov_bbb.mp4';
            const videoUrl2 = 'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.webm';
            function openVideoModal(videoSrc) { videoPlayer.src = videoSrc; videoModalOverlay.classList.remove('hidden'); document.body.classList.add('overflow-hidden'); videoPlayer.play(); }
            function closeVideoModal() { videoModalOverlay.classList.add('hidden'); document.body.classList.remove('overflow-hidden'); videoPlayer.pause(); videoPlayer.src = ''; }
            playVideo1Btn.addEventListener('click', () => openVideoModal(videoUrl1));
            playVideo2Btn.addEventListener('click', () => openVideoModal(videoUrl2));
            closeVideoModalBtn.addEventListener('click', closeVideoModal);
            videoModalOverlay.addEventListener('click', function (e) { if (e.target === videoModalOverlay) { closeVideoModal(); } });
        });
    </script>
</body>

</html>